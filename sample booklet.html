<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimized Book & Passport Carousel</title>
    <style>
        /* * Basic Styling & Centering
         * Establishes a flex container to center the main card.
         */
        body {
            height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #e9ecef;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            padding: 20px;
            box-sizing: border-box;
        }

        /* * Card Layout
         * The main container for the book and its description.
         */
        .card {
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            padding: 20px;
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* * Book Wrapper 
         * A relative container for the book and the absolute positioned swipe indicator.
         */
        .book-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        /* * The Book itself
         * Sized to ensure the open book (2 pages) fits within a mobile viewport.
         */
        .book {
            width: 45vw; /* Each page is 45% of viewport width */
            height: 65vw; /* Maintain aspect ratio */
            max-width: 180px; /* Max size for larger screens */
            max-height: 260px;
            position: relative;
            transition: transform 0.6s ease-in-out;
            transform-style: preserve-3d;
            perspective: 2000px;
        }

        /* * Paper (Page Leaf) Styling */
        .paper {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transform-style: preserve-3d;
            transition: transform 1.5s ease-in-out;
            transform-origin: left center;
        }

        .paper.flipped {
            transform: rotateY(-180deg);
        }

        .front,
        .back {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .front img, .back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .back {
            transform: rotateY(180deg);
            background-color: #f8f9fa;
        }

        /* Content Styling (Cover/End) */
        .front-content, .back-content {
            padding: 10px;
            text-align: center;
            color: #343a40;
        }
        
        .front-content h1, .back-content h1 {
            font-size: 1.5em;
            font-weight: bold;
        }

        .front-content p, .back-content p {
            font-size: 0.8em;
            color: #495057;
        }
        
        #cover-front .front-content, #cover-back .back-content {
            background: linear-gradient(45deg, #4a5568, #2d3748);
            color: white;
        }

        /* * Z-index stacking for pages */
        #p1 { z-index: 6; }
        #p2 { z-index: 5; }
        #p3 { z-index: 4; }
        #p4 { z-index: 3; }
        #p5 { z-index: 2; }
        #p6 { z-index: 1; }

        /* * Swipe Animation Indicator
         * A visual cue to guide users to swipe.
         */
        .swipe-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            opacity: 0.7;
            pointer-events: none; /* Allows clicks to pass through */
            transition: opacity 0.5s ease;
        }

        .swipe-indicator.hidden {
            opacity: 0;
        }
        
        .swipe-indicator svg {
            width: 80px;
            height: 80px;
            animation: swipe 2s ease-in-out infinite;
        }

        /* * Keyframe animation for the swipe gesture */
        @keyframes swipe {
            0%, 100% {
                transform: translateX(-20px);
            }
            50% {
                transform: translateX(20px);
            }
        }
        
        /* * Book Information Area
         * For the title and description below the book.
         */
        .book-info {
            text-align: center;
            margin-top: 25px;
            width: 100%;
            max-width: 380px; /* Keep text readable */
            padding: 0 10px;
            box-sizing: border-box;
        }
        .book-info h2 {
            margin: 0 0 8px 0;
            font-size: 1.4em;
            color: #343a40;
        }
        .book-info p {
            margin: 0;
            font-size: 0.95em;
            color: #6c757d;
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <div class="card">
        <div class="book-wrapper">
            <div id="book" class="book">
                <!-- Cover Page -->
                <div id="p1" class="paper" data-page-num="1">
                    <div class="front" id="cover-front">
                        <div class="front-content">
                            <h1>PASSPORT</h1>
                            <p>Image Carousel</p>
                        </div>
                    </div>
                    <div class="back">
                        <img src="https://placehold.co/400x600/a2d2ff/ffffff?text=Page+1" alt="Page 1" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                </div>

                <!-- Page 2 & 3 -->
                <div id="p2" class="paper" data-page-num="2">
                    <div class="front">
                         <img src="https://placehold.co/400x600/bde0fe/ffffff?text=Page+2" alt="Page 2" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                    <div class="back">
                         <img src="https://placehold.co/400x600/ffafcc/ffffff?text=Page+3" alt="Page 3" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                </div>
                
                <!-- Page 4 & 5 -->
                <div id="p3" class="paper" data-page-num="3">
                    <div class="front">
                        <img src="https://placehold.co/400x600/ffc8dd/ffffff?text=Page+4" alt="Page 4" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                    <div class="back">
                         <img src="https://placehold.co/400x600/cdb4db/ffffff?text=Page+5" alt="Page 5" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                </div>

                <!-- Page 6 & 7 -->
                <div id="p4" class="paper" data-page-num="4">
                    <div class="front">
                        <img src="https://placehold.co/400x600/d4a373/ffffff?text=Page+6" alt="Page 6" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                    <div class="back">
                         <img src="https://placehold.co/400x600/faedcd/ffffff?text=Page+7" alt="Page 7" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                </div>

                <!-- Page 8 & 9 -->
                <div id="p5" class="paper" data-page-num="5">
                    <div class="front">
                        <img src="https://placehold.co/400x600/e9edc9/ffffff?text=Page+8" alt="Page 8" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                    <div class="back">
                         <img src="https://placehold.co/400x600/ccd5ae/ffffff?text=Page+9" alt="Page 9" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                </div>

                <!-- Page 10 & Back Cover -->
                <div id="p6" class="paper" data-page-num="6">
                    <div class="front">
                         <img src="https://placehold.co/400x600/fefae0/ffffff?text=Page+10" alt="Page 10" onerror="this.onerror=null;this.src='https://placehold.co/400x600/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                    <div class="back" id="cover-back">
                        <div class="back-content">
                            <h1>THE END</h1>
                        </div>
                    </div>
                </div>
            </div>

            <div class="swipe-indicator">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zm-7.518-.267A8.25 8.25 0 1120.25 10.5M8.288 14.212A8.25 8.25 0 1110.5 20.25" />
                </svg>
            </div>
        </div>
        
        <div class="book-info">
            <h2>Passport to Adventure</h2>
            <p>A collection of moments and memories from a journey far and wide. Swipe through the pages to explore the story within.</p>
        </div>
    </div>


    <script>
        // --- DOM Element Selection ---
        const book = document.getElementById("book");
        const swipeIndicator = document.querySelector('.swipe-indicator');

        // --- Configuration & State ---
        const papers = Array.from(book.querySelectorAll('.paper'));
        const numOfPapers = papers.length;
        const maxLocation = numOfPapers + 1;
        let currentLocation = 1;
        let isFlipping = false;

        // --- Core Functions ---
        
        /**
         * Flips to the next page, handling book opening and closing.
         */
        function goNextPage() {
            if (currentLocation >= maxLocation || isFlipping) return;
            
            isFlipping = true;
            swipeIndicator.classList.add('hidden'); // Hide hint on first interaction
            
            if (currentLocation === 1) {
                book.style.transform = "translateX(50%)"; // Opens the book
            }

            papers[currentLocation - 1].classList.add("flipped");
            papers[currentLocation - 1].style.zIndex = currentLocation;

            if (currentLocation === numOfPapers) {
                book.style.transform = "translateX(100%)"; // Closes the book at the end
            }
            
            currentLocation++;
            setTimeout(() => isFlipping = false, 1500); // Prevent spamming
        }

        /**
         * Flips to the previous page, handling book opening and closing.
         */
        function goPrevPage() {
            if (currentLocation <= 1 || isFlipping) return;

            isFlipping = true;
            swipeIndicator.classList.add('hidden');

            currentLocation--;

            if (currentLocation === 1) {
                book.style.transform = "translateX(0%)"; // Closes book to front
            }
            
            if (currentLocation === numOfPapers) {
                book.style.transform = "translateX(50%)"; // Re-opens the book from the end
            }

            const previousPaper = papers[currentLocation - 1];
            previousPaper.classList.remove("flipped");
            
            setTimeout(() => {
                previousPaper.style.zIndex = numOfPapers - (currentLocation - 1);
            }, 500);

            setTimeout(() => isFlipping = false, 1500);
        }

        // --- Event Listeners ---
        
        // Click to turn page
        papers.forEach(paper => {
            paper.addEventListener('click', (e) => {
                const paperRect = paper.getBoundingClientRect();
                const clickX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;

                if (!paper.classList.contains('flipped') && clickX > paperRect.left + paperRect.width * 0.25) {
                    goNextPage();
                } else if (paper.classList.contains('flipped') && clickX < paperRect.left + paperRect.width * 0.75) {
                    goPrevPage();
                }
            });
        });
        
        // --- Swipe Gestures for Mobile ---
        let touchstartX = 0;
        
        book.addEventListener('touchstart', (event) => {
            touchstartX = event.changedTouches[0].screenX;
        }, false);

        book.addEventListener('touchend', (event) => {
            const touchendX = event.changedTouches[0].screenX;
            const swipeThreshold = 50;
            if (touchendX < touchstartX - swipeThreshold) goNextPage();
            if (touchendX > touchstartX + swipeThreshold) goPrevPage();
        }, false); 
    </script>
</body>
</html>
